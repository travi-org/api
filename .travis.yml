language: node_js
node_js:
- 5.1
- 5.5

before_install:
  - psql -c 'create database travi_api;' -U postgres
  - npm install -g grunt-cli

addons:
  postgresql: "9.4"

services: postgresql

env: API_DB_USER=postgres API_DB_PW= API_DB_URL=postgresql://localhost/travi_api

install: npm install

sudo: false

after_script: grunt mochacov:coverage

deploy:
  provider: heroku
  api_key:
    secure: ejE97ISrl0D/NeX7mjY+HYaRgEPNtvv6GHWxCXqHiBf+/qTlv9vlOXIUz1ERIqWVC2OZOqDhXYBxFHADWrqXI6VzbX8R23UkosJgMTCpQCN362B5ytpuQynNzAY5TFgt3QNWLJAr9R2/Dzi3IfC89MmUEISJrYzWaiBzr8K1/JU=
  on:
    node: 5.1
